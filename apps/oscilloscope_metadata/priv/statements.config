{insert_metric,
 <<"INSERT INTO metrics"
   " (owner_id, props, aggregation)"
   " VALUES ($1, $2, $3);">>}.

{insert_resolution,
 <<"INSERT INTO resolutions"
   " (metric_id, interval, count)"
   " VALUES ($1, $2, $3);">>}.

{insert_user,
 <<"INSERT INTO users"
   " (username, port, email, password) VALUES ($1, $2, $3, $4);">>}.

{select_metric,
<<"SELECT "
  "    metrics.id, "
  "    metrics.aggregation, "
  "    resolutions.id, "
  "    resolutions.interval, "
  "    resolutions.count "
  "FROM metrics "
  "INNER JOIN resolutions ON metrics.id = resolutions.metric_id "
  "WHERE metrics.owner_id = $1 "
  "AND metrics.props = $2;">>}.

{select_metric_id,
 <<"SELECT id FROM metrics WHERE owner_id = $1 AND props = $2;">>}.

{used_ports, <<"SELECT port FROM users;">>}.

{select_persists,
 <<"SELECT timestamp, count FROM persists WHERE resolution_id = $1;">>}.

{insert_persist,
 <<"INSERT INTO persists"
   " (resolution_id, timestamp, count) VALUES"
   " ($1, $2, $3);">>}.

{delete_persist,
 <<"DELETE FROM persists"
   " WHERE resolution_id = $1"
   " AND timestamp = $2;">>}.

{select_user_id, <<"SELECT id FROM users WHERE username = $1">>}.

{find_metrics,
 <<"SELECT name FROM metrics"
   " WHERE user_id = $1"
   " AND name LIKE $2">>}.

{all_users,
 <<"SELECT username, password, port, id FROM users;">>}.
